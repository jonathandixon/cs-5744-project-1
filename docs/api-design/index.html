<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>REST API Design · CS 5744 - Project 1 - Pet Adoption and Medical Record System</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The REST API will play a very important role in the system. It will contain most of the business logic for the system and provide a common language for interacting with the data. The Data Access Object (DAO) design pattern is used in our REST API, as shown in the diagram below."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="REST API Design · CS 5744 - Project 1 - Pet Adoption and Medical Record System"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jonathandixon.github.io/cs-5744-project-1/"/><meta property="og:description" content="The REST API will play a very important role in the system. It will contain most of the business logic for the system and provide a common language for interacting with the data. The Data Access Object (DAO) design pattern is used in our REST API, as shown in the diagram below."/><meta property="og:image" content="https://jonathandixon.github.io/cs-5744-project-1/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jonathandixon.github.io/cs-5744-project-1/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/cs-5744-project-1/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/cs-5744-project-1/js/scrollSpy.js"></script><link rel="stylesheet" href="/cs-5744-project-1/css/main.css"/><script src="/cs-5744-project-1/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/cs-5744-project-1/"><img class="logo" src="/cs-5744-project-1/img/favicon.ico" alt="CS 5744 - Project 1 - Pet Adoption and Medical Record System"/><h2 class="headerTitleWithLogo">CS 5744 - Project 1 - Pet Adoption and Medical Record System</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>High-Level Design</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/introduction">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Requirements Summary</h3><ul class=""><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/use-cases">Use Cases</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/stakeholder-analysis">Stakeholder Analysis</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/requirements">Requirements</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">High-Level Design</h3><ul class=""><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/system-architecture">System Architecture</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/file-storage-design">File Storage Design</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/database-design">Database Design</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/cs-5744-project-1/docs/api-design">REST API Design</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/web-app-design">Web Application Design</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/requirement-traceability-matrix">Requirement Traceability Matrix</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Design Rationale</h3><ul class=""><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/system-architecture-rationale">System Architecture Rationale</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/database-design-rationale">Database Design Rationale</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/api-design-rationale">REST API Design Rationale</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/web-app-design-rationale">Web Application Design Rationale</a></li><li class="navListItem"><a class="navItem" href="/cs-5744-project-1/docs/conclusion">Conclusion</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">REST API Design</h1></header><article><div><span><p>The REST API will play a very important role in the system. It will contain most of the business logic for the system and provide a common language for interacting with the data. The Data Access Object (DAO) design pattern is used in our REST API, as shown in the diagram below.</p>
<figure>
  <img src="assets/rest-api.png" alt="REST API component structure."/>
  <figcaption>DAO Design Pattern in REST API component.</figcaption>
</figure>
<h2><a class="anchor" aria-hidden="true" id="dao"></a><a href="#dao" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DAO</h2>
<p>For each concept we have in our database, such as owner and pet, we will have a model class. For each model class, we will have a corresponding DAO class. On one side, the DAOs set up connections with the database and interact with it by sending SQL CRUD commands. And on the other side, they communicate with clients to provide and obtain data. The following diagram shows the relationships between components in DAO pattern.</p>
<figure>
  <img src="assets/rest-api-dao.png" alt="REST API component structure."/>
  <figcaption>DAO component relationships in the REST API component.</figcaption>
</figure>
<p>Client-DAO: By sending requests in the format “(baseURL)/api/(endpoint)”, clients interact with DAOs on the REST API server to get or post data.</p>
<p>Client-Model: Clients obtain, modify, and sometimes create model objects. They usually obtain model objects to display the information to users; modify model objects when users update the information; create model objects when there are new instances created by users to be inserted into database.</p>
<p>DAO-Database: DAO classes implement methods that handle the requests from clients. Upon calling, they will set up a connection with the database, prepare the command with, if any, parameters passed in, and execute the command.</p>
<p>DAO-Model: DAO creates model object(s) after reading from the database. DAO reads from model object(s) when the properties of them get updated or they are newly created and need to be inserted to the database.</p>
<p>Model-Database: Different model classes represent different concepts in the database. Each model object represents a line in the database.</p>
<p>The following diagram presents the interactions between clients and database through the DAO pattern. Upon the service launches, DAOs are created and ready to communicate with both the clients and the database. The clients can get, set, insert, and delete data without any knowledge of the implementation of the database.</p>
<figure>
  <img src="assets/rest-api-sequence.png" alt="REST API component sequence diagram."/>
  <figcaption>Sequence of interactions between client, DAO, and the database.</figcaption>
</figure>
<h2><a class="anchor" aria-hidden="true" id="dao-operations"></a><a href="#dao-operations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DAO Operations</h2>
<p>Get data (SELECT):</p>
<ul>
<li>Client sends request to the REST API</li>
<li>DAO process the request, prepare and execute the SQL statement, and get data from database</li>
<li>After receiving data from the database, DAO creates a model object (or a list of model objects, depending on the type of request)</li>
<li>Finally, DAO returns the model object(s) created to the client</li>
</ul>
<p>Set data (UPDATE):</p>
<ul>
<li>Client changes the property of a model object it received earlier from the REST API</li>
<li>Then the client sends requests to the REST API to update data</li>
<li>DAO reads the updated information from the model object</li>
<li>Finally, DAO prepares and executes an UPDATE statement and changes the data in database</li>
</ul>
<p>Insert (INSERT):</p>
<ul>
<li>Client creates a new instance of model (usually when new accounts open or new records are generated)</li>
<li>Client sets the properties of the model object according to the new record</li>
<li>Client sends an insert request to the REST API</li>
<li>DAO reads the information in the newly created model object</li>
<li>DAO prepares and executes an INSERT statement and therefore insert the data into database</li>
</ul>
<p>Delete (DELETE):</p>
<ul>
<li>Client sends a request to delete some information</li>
<li>DAO prepares and execute a DELETE statement to remove the corresponding data in database</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="api-endpoints"></a><a href="#api-endpoints" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>API Endpoints</h2>
<p>For the initial set of requirements all of the REST API endpoints should be private or protected in some way. We do not want to allow any anonymous source to access the API.</p>
<p>API endpoints examples (not an exhaustive list):</p>
<table>
  <thead>
    <tr>
      <th>API Endpoint</th>
      <th>Method</th>
      <th>Description</th>
      <th>Authorization Control</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>/user/login</td>
      <td>POST</td>
      <td>Accepts user credentials and issues time sensitive API token. (FR-5)</td>
      <td>No</td>
    </tr>
    <tr>
      <td>/user/register</td>
      <td>POST</td>
      <td>Processes registration form for all types of users. (FR-1 and FR-2)</td>
      <td>No</td>
    </tr>
    <tr>
      <td>/user/:id</td>
      <td>GET</td>
      <td>Fetches details about a user.</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/user/:id</td>
      <td>POST</td>
      <td>Updates a user’s details.</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/user/:id/pets</td>
      <td>GET</td>
      <td>Fetches details about a user’s pets</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/clinic</td>
      <td>GET</td>
      <td>Search for clinics.</td>
      <td>Maybe</td>
    </tr>
    <tr>
      <td>/clinic/:id</td>
      <td>GET</td>
      <td>Fetch details about a clinic.</td>
      <td>Maybe</td>
    </tr>
    <tr>
      <td>/clinic/:id/employee</td>
      <td>GET</td>
      <td>Fetch list of clinic employees</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/clinic/:id/employee/:id</td>
      <td>GET</td>
      <td>Fetch details about a clinic employee</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/clinic/:id/employee/:id</td>
      <td>POST</td>
      <td>Update details about a clinic employee. (FR-4)</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/clinic/:id/employee/create</td>
      <td>POST</td>
      <td>Allow business users to create employee accounts. (FR-3)</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/pet</td>
      <td>GET</td>
      <td>Search for pets.</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/pet/:id</td>
      <td>GET</td>
      <td>Fetch general information about a specific animal</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/pet/:id/vaccine</td>
      <td>GET</td>
      <td>Fetch vaccine history for a specific animal</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/pet/:id/vaccine</td>
      <td>POST</td>
      <td>Update vaccine history for a specific animal</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/pet/:id/record</td>
      <td>GET</td>
      <td>List of medical records associated with a pet.</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/pet/:id/record</td>
      <td>POST</td>
      <td>Add a new medical record for the pet.</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
</table>
<div class="notes">
  Notes:
  <ol>
    <li>‘:name’ are placeholders for dynamic values.</li>
    <li>All POST endpoints require a payload.</li>
    <li>Authorization control indicates additional security checks to verify a user can access or modify the requested resource.</li>
  </ol>
</div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/cs-5744-project-1/docs/database-design"><span class="arrow-prev">← </span><span>Database Design</span></a><a class="docs-next button" href="/cs-5744-project-1/docs/web-app-design"><span>Web Application Design</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#dao">DAO</a></li><li><a href="#dao-operations">DAO Operations</a></li><li><a href="#api-endpoints">API Endpoints</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Built with <a href="https://docusaurus.io/">Docusaurus</a></section><section class="copyright">Copyright © 2019</section></footer></div></body></html>